<div layout="column" class="card animated" ng-switch on="flipped" ng-class="{ flipInY: flipped, fadeIn: !flipped }">
	<md-card md-whiteframe="12">
		<md-card-header class="grade-{{ card.cuntal_order }}" layout="row">
			<md-card-header-text>
				<span class="md-title">{{ card.category }}</span>
				<span class="md-subhead">{{ card.cuntal_order }}</span>
			</md-card-header-text>

			<span flex></span>

			<md-card-avatar>
				<md-button class="md-icon-button md-primary" ng-click="flipped = !flipped" aria-label="card information">
					<i ng-switch-when="false" class="material-icons info-button">info_outline</i>

					<!-- if flipped show filled in info button -->
					<i ng-switch-when="true" class="material-icons info-button">info</i>
				</md-button>
			</md-card-avatar>
		</md-card-header>


		<!-- default, unflipped state - show front image -->
		<img ng-switch-when="false" ng-src="https://tcmaster.file.core.windows.net/images/{{card.images[0]}}?sv=2016-05-31&ss=f&srt=sco&sp=r&se=2027-06-15T02:32:29Z&st=2017-06-14T18:32:29Z&spr=https,http&sig=Zdsf9%2BA1oi5QavILbKy3RUjuzy%2F63nRBEgU4HHTA77M%3D" class="md-card-image" alt="card photo" />

		<!-- else if flipped show rear image -->
		<img ng-switch-when="true" ng-src="https://tcmaster.file.core.windows.net/images/{{card.images[1]}}?sv=2016-05-31&ss=f&srt=sco&sp=r&se=2027-06-15T02:32:29Z&st=2017-06-14T18:32:29Z&spr=https,http&sig=Zdsf9%2BA1oi5QavILbKy3RUjuzy%2F63nRBEgU4HHTA77M%3D" class="md-card-image" alt="card photo" />


		<md-card-title>
			<!-- unflipped title - show name -->
			<md-card-title-text ng-switch-when="false">
				<span class="md-headline">{{ card.name }}</span>
			</md-card-title-text>

			<!-- flipped state - show biography -->
			<md-card-title-text ng-switch-when="true">
				<span class="md-headline">{{ card.name }} Biography</span>
			</md-card-title-text>
		</md-card-title>


		<!-- unflipped card actions - show credentials -->
		<md-card-actions layout="column" layout-align="space-around none" ng-switch-when="false">
			<div class="category-row" layout="row" ng-hide="hideUnpalatibility">
				<p>Unpalatibility:</p>
				<span flex></span>
				<md-button class="play-button grade-{{ card.cuntal_order }}" ng-click="play('unpalatibility', card.unpalatibility)">
					{{ card.unpalatibility }}
				</md-button>
			</div>

			<div class="category-row" layout="row" ng-hide="hideUpTheirOwnArsemanship">
				<p>Up their own arsemanship:</p>
				<span flex></span>
				<md-button class="play-button grade-{{ card.cuntal_order }}" ng-click="play('up_their_own_arsemanship', card.up_their_own_arsemanship)">
					{{ card.up_their_own_arsemanship }}
				</md-button>
			</div>

			<div class="category-row" layout="row" ng-hide="hideMediaAttention">
				<p>Media attention:</p>
				<span flex></span>
				<md-button class="play-button grade-{{ card.cuntal_order }}" ng-click="play('media_attention', card.media_attention)">
					{{ card.media_attention }}
				</md-button>
			</div>

			<div class="category-row" layout="row" ng-hide="hideLegacy">
				<p>Legacy:</p>
				<span flex></span>
				<md-button class="play-button grade-{{ card.cuntal_order }}" ng-click="play('legacy', card.legacy)">
					{{ card.legacy }}
				</md-button>
			</div>

			<div class="category-row" layout="row" ng-hide="hidePpc">
				<p>PPC (price per cunt):</p>
				<span flex></span>
				<md-button class="play-button grade-{{ card.cuntal_order }}" ng-click="play('ppc', card.ppc)">
					{{ card.ppc }}
				</md-button>
			</div>

			<div class="category-row" layout="row" ng-hide="hideSpecialAbility">
				<p>Special ability:</p>
				<span flex></span>
				<md-button class="play-button grade-{{ card.cuntal_order }}" ng-click="play('special_ability', card.special_ability)">
					{{ card.special_ability }}
				</md-button>
			</div>

			<!-- opposition result - shows when player in turn selects a category -->
			<div class="animated zoomIn" layout="column" ng-show="showScore">
				<!--<md-divider></md-divider>-->
				<p class="text-center">
					<img src="/images/vs.png" alt="versus" />
				</p>
				<!--<md-divider></md-divider>-->

				<h2>{{ result.opponentCard[0].name }}</h2>

				<!-- opponent score slider -->
				<div class="category-row" layout="row">
					<md-progress-linear class="score-slider" md-mode="determinate" value="{{ result.scoreSlider }}"></md-progress-linear>
					<span flex></span>
					<md-button class="play-button grade-{{ card.cuntal_order }}">
						{{ result.scoreSliderValue }}
					</md-button>
				</div>
				
				<!-- result message -->
				<div class="animated zoomIn" layout="column" ng-show="showResult">
					<h3 class="text-center">{{ result.message }}</h3>
					<p class="text-center">Loading next round...</p>
					<md-progress-linear md-mode="indeterminate"></md-progress-linear>
				</div>
			</div>

		</md-card-actions>


		<!-- default, unflipped - show special ability description -->
		<md-card-content ng-switch-when="false" ng-hide="showScore">
			<md-divider></md-divider>
			<h4>Special ability description:</h4>
			<p>{{ card.special_ability_description }}</p>
		</md-card-content>


		<!-- flipped - show biography -->
		<md-card-content ng-switch-when="true" ng-hide="showScore">
			<p ng-bind-html="card.bio"></p>
			<h5>References</h5>
			<ul>
				<li ng-repeat="ref in card.references" ng-bind-html="displayLink(ref)"></li>
			</ul>
		</md-card-content>

	</md-card>
</div>